%══════════════════════════════════════════%
%                                          %
%                  BMC                     %
%     A Bespoke, Multipurpose Class        %
%     -- Reference Functionality --        %
%                 -~=~-                    %
%          Authored by tecosaur            %
%                                          %
%══════════════════════════════════════════%

\ProvidesPackage{bmc-ref}[2019/07/27 Load and configure hyperref, hyperxmp, and cleveref]
\NeedsTeXFormat{LaTeX2e}

\ifdefined\@bmc\else
	\RequirePackage{etoolbox}
\fi

\renewcommand{\@title}{}
\renewcommand{\@author}{}

\RequirePackage[
	pdfa,
	unicode=true, % loads with unicode support
	pdfencoding=unicode,
	psdextra, % loads replacements for some maths
	%a4paper=true, %
	pdftex, %
	backref, %
	pagebackref=false, % creates backward references too
	bookmarks=true, % generate bookmarks in PDF files
	bookmarksopen=false, % when starting with AcrobatReader, the Bookmarkcolumn is opened
	pdfpagemode=UseNone,% UseNone, UseOutlines, UseThumbs, FullScreen
	pdftoolbar=false,
	pdfmenubar=true,
	pdffitwindow=false,
	pdfdisplaydoctitle,
	pdfborder={1 1 0},
]{hyperref}

\pdfstringdefDisableCommands{%
  % misc
  \def\acr#1{#1}%
  \def\kern #1{}%
  % font stuff
  \def\fontseries#1{}%
  \def\selectfont{}%
  \def\Huge{}%
  \def\huge{}%
  \def\LARGE{}%
  \def\Large{}%
  \def\large{}%
  \def\normalsize{}%
  \def\small{}%
  \def\footnotesize{}%
  \def\scriptsize{}%
  \def\tiny{}%
  % space
  \def\hspace#1{}%
  \def\hphantom#1{}%
  \def\sbox0#1{}%
  \def\newline{}%
  \def\\{}%
  % MATHS
  \def\({}%
  \def\){}%
  \def\qopname#1#2#3{#3}%
  % brackets
  \def\left{}%
  \def\right{}%
  \def\vert{|}%
  \def\lvert{|}%
  \def\rvert{|}%
  \def\|{∥}%
  \def\Vert{∥}%
  \def\lVert{∥}%
  \def\rVert{∥}%
  \def\lfloor{⌊}%
  \def\rfloor{⌋}%
  \def\lceil{⌈}%
  \def\rceil{⌉}%
  \def\backslash{\textbackslash}%
  % constructs
  \def\frac#1#2{#1/#2}%
  \def\sqrt#1{√#1}%
  \def\overline#1{#1}%
  \def\underline#1{#1}%
  \def\widehat#1{#1}%
  \def\widetilde#1{#1}%
  \def\overrightarrow#1{#1}%
  \def\overleftarrow#1{#1}%
  \def\binom#1#2{#1𝑪#2}%
  % variable size symbols
  \def\coprod{∐}%
  \def\biguplus{⨄}%
  \def\bigcup{⋃}%
  \def\bigoplus{⨁}%
  \def\bigotimes{⨂}%
  \def\bigodot{⨀}%
  \def\bigvee{⋁}%
  \def\bigwedge{⋀}%
  \def\bigsqcup{⨆}%
  % accents
  \def\dot#1{\.#1}%
  \def\ddot#1{\"#1}%
  \def\tilde#1{\~#1}%
  \def\acute#1{\'#1}%
  \def\grave#1{\`#1}%
  \def\hat#1{\^#1}%
  \def\check#1{\v#1}%
  \def\breve#1{\u#1}%
  \def\bar#1{\=#1}%
  \def\vec#1{#1}%
  % ams extra greek characters
  \def\varepsilon{ε}%
  \def\vartheta{ϑ}%
  \def\varpi{ϖ}%
  \def\varsigma{ς}%
  \def\varphi{φ}%
  \def\varGamma{Γ}%
  \def\varDelta{∆}%
  \def\varTheta{Θ}%
  \def\varLambda{Λ}%
  \def\varXi{Ξ}%
  \def\varPi{Π}%
  \def\varSigma{Σ}%
  \def\varUpsilon{Υ}%
  \def\varPhi{Φ}%
  \def\varPsi{Ψ}%
  \def\varOmega{Ω}%
}

\RequirePackage{hyperxmp}
\AtEndPreamble{
	\hypersetup{
		pdftitle={\@title},
		pdfauthor={\@author},
		pdfsubject={\@subtitle},
		pdfcreator=pdfLaTeX,
		pdfproducer={\@author},
		% pdfkeywords={{a}{b}},
		linktoc=all,
		colorlinks=true,
		linkcolor=href,
		anchorcolor=href,
		citecolor=href,
		menucolor=primary,
		runcolor=href,
		urlcolor=href,
		filecolor=href,
		breaklinks=true
	}
}
\urlstyle{same}
